<source>
  @type  forward
  @id    input1
  port  24224
</source>

<filter **>
  @type stdout
</filter>

  # Save every log stream tagged with a 'docker.' prefix to /fluentd/log/docker.*.log
# <match docker.**>
#     @type file
#     @id   output_docker1
#     path         /fluentd/log/docker.*.log
#     symlink_path /fluentd/log/docker.log
#     append       true
#     time_slice_format %Y%m%d
#     time_slice_wait   1m
#     time_format       %Y%m%dT%H%M%S%z
# </match>

# Single MongoDB
<match docker.**>
  @type mongo
  host mongo
  port 27017
  
  tag_mapped

  database fluentd
  remove_tag_prefix docker.
  collection container_logs

  # for capped collection
  capped
  capped_size 1024m

  <inject>
    # key name of timestamp
    time_key time
  </inject>

  <buffer>
    # flush
    flush_interval 10s
  </buffer>
</match>
